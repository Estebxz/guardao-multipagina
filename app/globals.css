@import "tailwindcss";
@import "@fontsource-variable/manrope";

@theme inline {
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-success: var(--success);
  --color-success-foreground: var(--success-foreground);

  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  --font-sans: var(--font-sans);
  --font-mono: var(--font-mono);
  --font-serif: var(--font-serif);

  --shadow-2xs: var(--shadow-2xs);
  --shadow-xs: var(--shadow-xs);
  --shadow-sm: var(--shadow-sm);
  --shadow: var(--shadow);
  --shadow-md: var(--shadow-md);
  --shadow-lg: var(--shadow-lg);
  --shadow-xl: var(--shadow-xl);
  --shadow-2xl: var(--shadow-2xl);

  --crafter-primary: var(--crafter-primary);
  --font-fusion: var(--font-fusion);
}

:root {
  /* Base theme colors */
  --background: oklch(0.2046 0 0);
  --foreground: oklch(0.92 0 0);
  --card: oklch(0.27 0 0);
  --card-foreground: oklch(0.92 0 0);
  --popover: oklch(0.27 0 0);
  --popover-foreground: oklch(0.92 0 0);
  --primary: oklch(0.48 0.1315 254.79);
  --primary-foreground: oklch(1 0 0);
  --secondary: oklch(0.27 0 0);
  --secondary-foreground: oklch(0.92 0 0);
  --muted: oklch(0.27 0 0);
  --muted-foreground: oklch(0.72 0 0);
  --accent: oklch(0.5774 0.2091 273.85);
  --accent-foreground: oklch(0.88 0.06 254.13);
  --destructive: oklch(0.64 0.21 25.33);
  --destructive-foreground: oklch(1 0 0);
  --success: oklch(0.77 0.15 163.22);
  --sidebar: oklch(0.2686 0 0);
  --success-foreground: oklch(1 0 0);
  --border: oklch(0.37 0 0);
  --input: oklch(0.37 0 0);
  --ring: oklch(0.62 0.19 259.81);

  /* Font families */
  --font-sans: Inter, sans-serif;
  --font-serif: Source Serif 4, serif;
  --font-mono: JetBrains Mono, monospace;
  --radius: 0.375rem;

  /* Additional colors */
  --crafter-primary: oklch(0.88 0.1811 94.46);
  --font-fusion: "fusion", Helvetica, sans-serif;

  --keyboard-bg: oklch(0.24 0.038 283);
  --keyboard-base: oklch(0.20 0.040 280);
  --keyboard-highlight: oklch(0.38 0.052 287);
  --keyboard-shadow: oklch(22.419% 0.03863 282.84);
  
  /* Text - Silver-purple */
  --keyboard-text: oklch(0.88 0.022 292);
  --keyboard-text-shadow: oklch(0.44 0.042 286);
  --keyboard-text-shadow-dark: oklch(0.28 0.036 282);
  
  /* Key - Subtle purple elevation */
  --keyboard-key-bg: oklch(0.32 0.048 285);
  --keyboard-key-highlight: oklch(0.48 0.062 290);
  --keyboard-key-shadow: oklch(0.18 0.040 280);
  
  /* Insets */
  --keyboard-inset-highlight: oklch(0.42 0.055 288);
  --keyboard-inset-shadow: oklch(0.22 0.038 282);
}

@font-face {
  font-family: "fusion";
  src: url("/fonts/fusion-pixel-12px-proportional-sc-latin-400-normal.woff2")
    format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

body {
  z-index: 0;

  background: var(--background);
  color: var(--foreground);
  font-family: "Manrope Variable", Helvetica, sans-serif;
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: url("/bg.webp") no-repeat 80% 20% / 140% auto;
  opacity: 0.6;
  filter: blur(20px);
  transform: scale(1.1);

  z-index: -2;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: url("/mask-image.svg") repeat-y center / cover;
  z-index: -1;
}

.keyboard {
  transform: rotateX(60deg) rotateZ(45deg);
  transform-style: preserve-3d;
  background: var(--keyboard-bg);
  border-radius: 2rem;
  padding: 2rem;
  box-shadow: inset 1rem 1rem 0 0.4rem var(--keyboard-highlight);
  display: flex;
  gap: 0 2rem;
  position: relative;
}

.keyboard .shade {
  position: absolute;
  top: 0;
  left: 0;
  width: 90%;
  height: 5rem;
  background-image: linear-gradient(
    90deg,
    var(--keyboard-shadow) 50%,
    var(--keyboard-highlight)
  );
  transform: rotateX(90deg) rotateX(14deg) translateX(10rem) translateY(-6rem)
    translateZ(-39rem);
  filter: blur(0.5rem);
}

.keyboard .cover {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  background: transparent;
  border-radius: 2rem;
  box-shadow:
    inset -0.3rem -0.3rem 0.1rem 0.2rem var(--keyboard-highlight),
    inset -1rem -1rem 0 0.4rem var(--keyboard-inset-shadow),
    inset -2rem -2rem 2rem -0.6rem var(--keyboard-base),
    0 0 var(--keyboard-base),
    0.3rem 0.3rem var(--keyboard-base),
    0.6rem 0.6rem var(--keyboard-base),
    0.9rem 0.9rem var(--keyboard-base),
    1.2rem 1.2rem var(--keyboard-base),
    1.5rem 1.5rem var(--keyboard-base),
    1.8rem 1.8rem var(--keyboard-base),
    2.1rem 2.1rem var(--keyboard-base),
    2.4rem 2.4rem var(--keyboard-base),
    2.7rem 2.7rem var(--keyboard-base),
    3rem 3rem var(--keyboard-base),
    3.3rem 3.3rem var(--keyboard-base),
    3.6rem 3.6rem var(--keyboard-base),
    3.9rem 3.9rem var(--keyboard-base),
    4.2rem 4.2rem var(--keyboard-base),
    4.5rem 4.5rem var(--keyboard-base),
    4.8rem 4.8rem var(--keyboard-base),
    5.1rem 5.1rem var(--keyboard-base),
    5.4rem 5.4rem var(--keyboard-base),
    5.7rem 5.7rem var(--keyboard-base),
    6rem 6rem var(--keyboard-base),
    6.3rem 6.3rem var(--keyboard-base),
    6.6rem 6.6rem var(--keyboard-base),
    6.6rem 6.6rem var(--keyboard-base),
    8rem 8rem 1.5rem var(--keyboard-shadow);
}

.key {
  position: relative;
  width: 6rem;
  height: 6rem;
  transform: translateX(-3rem) translateY(-3rem);
  transform-style: preserve-3d;
  user-select: none;
  transition: transform 0.1s ease-out;
}

.key.active {
  transform: translateX(-1rem) translateY(-1rem);
}

.key .char {
  position: absolute;
  font-size: 4rem;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  color: var(--keyboard-text);
  text-shadow:
    0.05rem 0rem 0 var(--keyboard-text-shadow),
    0.05rem 0.1rem 0 var(--keyboard-text-shadow-dark),
    0.1rem 0.05rem 0 var(--keyboard-text-shadow),
    0.1rem 0.15rem 0 var(--keyboard-text-shadow-dark),
    0.15rem 0.1rem 0 var(--keyboard-text-shadow),
    0.15rem 0.2rem 0 var(--keyboard-text-shadow-dark),
    0.2rem 0.15rem 0 var(--keyboard-text-shadow),
    0.2rem 0.25rem 0 var(--keyboard-text-shadow-dark),
    0.25rem 0.2rem 0 var(--keyboard-text-shadow),
    0.25rem 0.3rem 0 var(--keyboard-text-shadow-dark);

  z-index: 3;
  pointer-events: none;
}

.key .side {
  position: absolute;
  width: 250%;
  height: 140%;
  background-image: linear-gradient(
    var(--keyboard-key-highlight) 30%,
    var(--keyboard-key-shadow) 40%
  );
  border-radius: 1rem;
  transform: rotateZ(45deg) translate(19%, 30%);
  z-index: 0;
}

.key .top {
  position: relative;
  width: 100%;
  height: 100%;
  z-index: 1;
}

.key .top::before {
  content: "";
  position: absolute;
  width: 100%;
  height: 100%;
  background-color: var(--keyboard-key-bg);
  border-radius: 0.8em;
  filter: blur(0.3rem);
  transform: translate(10%, 10%);
  z-index: 1;
}

.key .top::after {
  content: "";
  position: absolute;
  top: -2.5%;
  left: -2.5%;
  width: 105%;
  height: 105%;
  background-image: linear-gradient(
    -50deg,
    transparent 45%,
    var(--keyboard-key-highlight) 55%
  );
  border-radius: 0.8rem;
  box-shadow:
    inset -0.2rem -0.2rem 0.5rem -0.2rem var(--keyboard-inset-shadow),
    0.2rem 0.2rem 0.5rem -0.2rem var(--keyboard-inset-highlight);
  z-index: 2;
}
